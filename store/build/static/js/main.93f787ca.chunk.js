(this.webpackJsonpstore=this.webpackJsonpstore||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(1),a=c.n(s),r=c(8),i=c.n(r),o=(c(14),c(5)),j=c(2),l=(c(15),function(e){return fetch("/cartItems/".concat(e),{method:"GET"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}),u=function(e,t,c,n){return fetch("/cartItems/".concat(e,"/").concat(t),{method:"PATCH",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({newQuantity:c,factor:n})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},d=function(e){var t=e.user,c=e.onLogout,s=e.toHomePage,a=e.toViewCartPage,r=e.toCheckoutPage;e.username;return t.isLoggedIn?Object(n.jsx)("nav",{children:Object(n.jsxs)("ul",{className:"nav",children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{className:"nav-image",src:"./images/home.png",alt:"home"}),Object(n.jsx)("a",{href:"#home",onClick:s,children:Object(n.jsx)("div",{className:"nav-subtitle",children:"Home"})})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{className:"nav-image",src:"./images/cart.png",alt:"cart"}),Object(n.jsx)("a",{href:"#viewCart",onClick:a,children:Object(n.jsx)("div",{className:"nav-subtitle",children:"View Cart"})})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{className:"nav-image",src:"./images/checkout.png",alt:"checkout"}),Object(n.jsx)("a",{href:"#checkout",onClick:r,children:Object(n.jsx)("div",{className:"nav-subtitle",children:"Checkout"})})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{className:"nav-image",src:"./images/logout.png",alt:"logout"}),Object(n.jsx)("a",{href:"#logout",onClick:c,children:Object(n.jsx)("div",{className:"nav-subtitle",children:"Logout"})})]})]})}):null},m=function(e){var t=e.onLogin,c=Object(s.useState)(""),a=Object(j.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(!0),l=Object(j.a)(o,2),u=l[0],d=l[1],m=Object(s.useState)(!1),b=Object(j.a)(m,2),h=b[0],O=b[1],f=Object(s.useState)(""),x=Object(j.a)(f,2),p=x[0],v=x[1],g=function(){O(!0),function(e){var t=e.username;return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}({username:r}).then((function(e){v(""),O(!1),t({username:r})})).catch((function(e){v(e.error),O(!1)}))};return Object(n.jsxs)("div",{children:[p&&Object(n.jsx)("div",{className:"status",children:p}),Object(n.jsx)("div",{className:"login-form",children:Object(n.jsxs)("label",{children:["Username:",Object(n.jsx)("input",{disabled:h,onChange:function(e){i(e.target.value),d(!e.target.value)},value:r}),u||h?Object(n.jsx)("button",{className:"login-button-disabled",onClick:g,disabled:u||h,children:h?"...":"Login"}):Object(n.jsx)("button",{className:"login-button",onClick:g,disabled:u||h,children:h?"...":"Login"})]})})]})},b=function(e){var t=e.toSearch;return Object(n.jsx)("div",{className:"search-display",children:Object(n.jsx)("span",{className:"search-info",children:Object(n.jsx)("input",{className:"search",placeholder:"search by name",onChange:function(e){return function(e){t(e.target.value)}(e)}})})})},h=function(e){var t=e.sortDir,c=e.setSortDir;return Object(n.jsxs)("div",{className:"sort-display",children:[Object(n.jsx)("label",{className:"sort-title",children:"Sort By"}),Object(n.jsxs)("select",{className:"sort",value:t.type,placeholder:"all",onChange:function(e){return function(e){switch(e.target.value){case"name-asc":c({type:"name-asc",name:"itemName"});break;case"name-desc":c({type:"name-desc",name:"itemName"});break;case"high-price":c({type:"high-price",name:"price"});break;case"low-price":c({type:"low-price",name:"price"});break;case"all":default:c({type:"all"})}}(e)},children:[Object(n.jsx)("option",{value:"name-asc",children:"Sort by name asc"}),Object(n.jsx)("option",{value:"name-desc",children:"Sort by name des"}),Object(n.jsx)("option",{value:"high-price",children:"Sort by high price"}),Object(n.jsx)("option",{value:"low-price",children:"Sort by low price"}),Object(n.jsx)("option",{value:"all",children:"All"})]})]})},O=c(3),f=function(e){var t=e.inventoryList,c=e.onDetailItem,a=(e.username,Object(s.useState)("")),r=Object(j.a)(a,2),i=r[0],o=r[1],l=Object(s.useState)(""),u=Object(j.a)(l,2),d=u[0],m=u[1],f=Object(s.useState)({type:"all"}),x=Object(j.a)(f,2),p=x[0],v=x[1],g=Object(s.useState)("All"),N=Object(j.a)(g,2),k=(N[0],N[1],Object(n.jsx)(b,{toSearch:function(e){m(e)}})),y=Object(n.jsx)(h,{sortDir:p,setSortDir:v}),S=function(e){var t=e.sortDir,c=e.list;switch(t.type){case"name-asc":return Object(O.a)(c).sort((function(e,c){return e[t.name].toLowerCase()>=c[t.name].toLowerCase()?1:-1}));case"name-desc":return Object(O.a)(c).sort((function(e,c){return e[t.name].toLowerCase()<=c[t.name].toLowerCase()?1:-1}));case"high-price":return Object(O.a)(c).sort((function(e,c){return e[t.name]<=c[t.name]?1:-1}));case"low-price":return Object(O.a)(c).sort((function(e,c){return e[t.name]>=c[t.name]?1:-1}));default:return Object(O.a)(c)}}({sortDir:p,list:Object.values(t)}).filter((function(e){return e.itemName.toLowerCase().indexOf(d.toLowerCase())>=0})).map((function(e){return Object(n.jsx)("li",{className:"inventory-item",children:Object(n.jsxs)("div",{className:"container-box",children:[Object(n.jsx)("img",{className:"listImage",src:e.image.url,alt:"item"}),Object(n.jsxs)("div",{className:"item-box-footer",children:[Object(n.jsx)("p",{}),Object(n.jsxs)("span",{className:"item-name",children:[" ",e.itemName,":"]}),Object(n.jsxs)("span",{className:"item-price",children:["$",e.price]})]}),Object(n.jsx)("p",{className:"item-viewdetail",children:Object(n.jsx)("a",{href:"#viewdetail",className:"home-viewdetails","data-id":e.itemId,onClick:function(e){return t=e.target.dataset.id,c(t),void o("");var t},children:"ViewDetails"})})]})},e.itemId)}));return Object(n.jsxs)("div",{className:"container",children:[i&&Object(n.jsx)("div",{className:"status",children:i}),k,y,Object(n.jsx)("ul",{className:"subCategory",children:S})]})},x=function(e){var t=e.commentList;return Object(n.jsx)("div",{className:"comments-display",children:Object(n.jsx)("ul",{children:Object.values(t).map((function(e,t){return Object(n.jsx)("li",{children:Object(n.jsx)("div",{className:"comments",children:Object(n.jsxs)("span",{className:"commenttext",children:[e.sender,":",e.text]})})},e.sender+t)}))})})},p=function(e){var t=e.itemId,c=e.username,a=Object(s.useState)(""),r=Object(j.a)(a,2),i=r[0],o=r[1],l=Object(s.useState)({}),u=Object(j.a)(l,2),d=u[0],m=u[1],b=Object(s.useState)(!0),h=Object(j.a)(b,2),O=h[0],f=h[1],p=Object(s.useState)(""),v=Object(j.a)(p,2),g=v[0],N=v[1],k=Object(s.useState)([]),y=Object(j.a)(k,2),S=y[0],w=y[1],I=Object(s.useState)(""),P=Object(j.a)(I,2),C=P[0],L=P[1],E=Object(s.useState)(!0),T=Object(j.a)(E,2),D=T[0],H=T[1];Object(s.useEffect)((function(){$(t)}),[g]);var $=function(e){(function(e){return fetch("/inventory/".concat(e),{method:"POST"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(e).then((function(e){m(e),w(e.comments),f(!1),N(d.quantity),o("")})).catch((function(e){o(e.error),f(!1)}))};if(O)return Object(n.jsx)("div",{children:"Loading..."});var A=function(e){(function(e,t){return fetch("/cart/".concat(e),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({itemId:t})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(c,e).then((function(e){o(" "),f(!1),N(d.quantity-1)})).catch((function(e){o(e.error),f(!1)}))},F=function(e){f(!0),function(e,t,c){return fetch("/inventory/".concat(e,"/").concat(t),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({text:c})}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(c,e,C).then((function(e){w(e),o(" "),f(!1),L(""),H(!0)})).catch((function(e){o(e.error),L(""),H(!0),f(!1)}))},Q=Object(n.jsx)(x,{commentList:S});return Object(n.jsxs)("div",{className:"detail-page",children:[i&&Object(n.jsx)("div",{className:"status",children:i}),Object(n.jsx)("div",{className:"detail-heading",children:Object(n.jsxs)("h2",{className:"details-title",children:[" ",d.itemName]})}),Object(n.jsx)("div",{className:"detail-img-box",children:Object(n.jsx)("img",{className:"detail-image",src:d.image.url,alt:"product image"})}),Object(n.jsxs)("div",{className:"details-subtitle",children:[Object(n.jsx)("b",{children:"Price:"}),"$",d.price]}),Object(n.jsxs)("div",{className:"details-subtitle ",children:[Object(n.jsx)("b",{children:"Quanity:"}),g]}),Object(n.jsx)("div",{className:"add-tocart-button",children:Object(n.jsx)("button",{className:"to-cart","data-id":d.itemId,onClick:function(e){return A(e.target.dataset.id)},children:"Add To Cart"})}),Object(n.jsxs)("div",{className:"comments",children:[Object(n.jsx)("div",{className:"details-subtitle",children:Object(n.jsx)("b",{children:"Comments:"})}),Q]}),Object(n.jsxs)("div",{className:"send-form",children:[Object(n.jsx)("div",{className:"details-subtitle",children:Object(n.jsx)("b",{children:"Share your views:"})}),Object(n.jsx)("p",{}),Object(n.jsx)("textarea",{rows:"5",cols:"60",disabled:O,onChange:function(e){o(" "),L(e.target.value),H(!e.target.value)},value:C}),Object(n.jsx)("p",{}),D||O?Object(n.jsx)("button",{className:"add-comments-button-disabled","data-id":d.itemId,onClick:function(e){return F(e.target.dataset.id)},disabled:D||O,children:O?"...":"Add Comment"}):Object(n.jsx)("button",{className:"add-comments-button","data-id":d.itemId,onClick:function(e){return F(e.target.dataset.id)},disabled:D||O,children:O?"...":"Add Comment"})]})]})},v=function(e){var t=e.username,c=e.isHome,a=e.setIsHome,r=Object(s.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(s.useState)(!1),d=Object(j.a)(u,2),m=d[0],b=d[1],h=Object(s.useState)(""),O=Object(j.a)(h,2),x=O[0],v=O[1],g=Object(s.useState)(""),N=Object(j.a)(g,2),k=N[0],y=N[1];Object(s.useEffect)((function(){S({setInventoryList:l})}),[]);var S=function(e){var t=e.setInventoryList;fetch("/inventory",{method:"GET"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){t(e),a(!0),v("")})).catch((function(e){v(e.error)}))};return Object(n.jsxs)("div",{className:"display-panel",children:[x&&Object(n.jsx)("div",{className:"status",children:x}),Object(n.jsx)("p",{}),m&&!c?Object(n.jsx)(p,{itemId:k,username:t}):Object(n.jsx)(f,{inventoryList:o,onDetailItem:function(e){b(!0),a(!1),y(e)},username:t})]})},g=0,N=function(e){var t=0;return Object.values(e).map((function(e){return t+=parseFloat(e.totalPrice)})),g=.1*t+t+5.99,t.toFixed(2)},k=function(e){var t=e.username,c=Object(s.useState)(""),a=Object(j.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(""),d=Object(j.a)(o,2),m=d[0],b=d[1],h=Object(s.useState)(""),O=Object(j.a)(h,2),f=O[0],x=O[1],p=Object(s.useState)(!0),v=Object(j.a)(p,2),g=v[0],k=v[1];Object(s.useEffect)((function(){y({setViewCartList:i})}),[]);var y=function(e){var c=e.setViewCartList;l(t).then((function(e){c(e.cartItems),x(N(e.cartItems)),b(" "),k(!1)})).catch((function(e){b(e.error),k(!1)}))},S=function(e){e.preventDefault();var c=e.target.dataset.id;(function(e,t){return fetch("/cartItems/".concat(e,"/").concat(t),{method:"DELETE"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(t,c).then((function(e){i(e.cartItems),x(N(e.cartItems)),b(""),k(!1)})).catch((function(e){b(e.error),k(!1)}))};return g?Object(n.jsx)("div",{children:"Loading..."}):0===Object.keys(r).length?Object(n.jsx)("div",{className:"messages",children:Object(n.jsx)("h3",{children:"Your Cart is Empty"})}):Object(n.jsxs)("div",{className:"viewcart-item-display",children:[m&&Object(n.jsx)("div",{className:"status",children:m}),Object(n.jsx)("h2",{className:"viewcart-title",children:"Shopping Cart"}),Object(n.jsxs)("ul",{className:"viewcart-items",children:[" ",Object.values(r).map((function(e){return Object(n.jsx)("li",{className:"viewcart-item-list-display",children:Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"viewcart-items-info",children:[Object(n.jsx)("span",{"data-item-id":e.itemId,className:"item check",children:e.itemName}),Object(n.jsx)("img",{className:"delete-image",src:"./images/delete1.png","data-id":e.itemId,onClick:function(e){return S(e)}})]}),Object(n.jsxs)("div",{className:"viewcart-quantity-info",children:[Object(n.jsx)("button",{"data-id":e.itemId,className:"increase-quantity ",type:"button",onClick:function(){return function(e,c){var n=parseInt(c)+1;u(t,e,n,-1).then((function(e){i(e.cartItems),x(N(e.cartItems)),b(""),k(!1)})).catch((function(e){b(e.error),k(!1)}))}(e.itemId,e.orderedQuan)},children:"+"}),Object(n.jsx)("input",{"data-item-id":e.itemId,className:"item-quantity ",type:"number",placeholder:e.orderedQuan}),Object(n.jsx)("button",{"data-id":e.itemId,className:"decrease-quantity ",type:"button",onClick:function(){return function(e,c){var n=parseInt(c)-1;u(t,e,n,1).then((function(e){i(e.cartItems),x(N(e.cartItems)),b(""),k(!1)})).catch((function(e){b(e.error),k(!1)}))}(e.itemId,e.orderedQuan)},children:"-"})]}),Object(n.jsxs)("span",{"data-item-id":e.itemId,className:"viewcart-item-price",children:["Total Price: $",e.totalPrice]})]})},e.itemId)}))]}),Object(n.jsxs)("p",{className:"viewcart-total",children:[Object(n.jsx)("b",{children:"Total Amount :"}),"$",f," "]})]})},y=function(e){var t=e.username,c=Object(s.useState)(""),a=Object(j.a)(c,2),r=a[0],i=a[1],o=Object(s.useState)(""),u=Object(j.a)(o,2),d=u[0],m=u[1],b=Object(s.useState)({}),h=Object(j.a)(b,2),O=h[0],f=h[1],x=Object(s.useState)(""),p=Object(j.a)(x,2),v=p[0],k=p[1],y=Object(s.useState)(!1),S=Object(j.a)(y,2),w=S[0],I=S[1],P=Object(s.useState)(!0),C=Object(j.a)(P,2),L=C[0],E=C[1];Object(s.useEffect)((function(){T({setCheckoutList:f})}),[]);var T=function(e){e.setCheckoutist;l(t).then((function(e){f(e.cartItems),i(N(e.cartItems)),k(g.toFixed(2)),m(" "),I(!1),E(!1)})).catch((function(e){m(e.error),I(!1),E(!1)}))},D=function(){(function(e){return fetch("/order/".concat(e),{method:"DELETE"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(t).then((function(){m(" "),I(!0),E(!1)})).catch((function(e){m(e.error)}))};return L?Object(n.jsx)("div",{children:"Loading..."}):0===Object.keys(O).length?Object(n.jsx)("div",{className:"checkout-app",children:Object(n.jsx)("h3",{children:"Your Cart is Empty"})}):Object(n.jsxs)("div",{className:"checkout-app",children:[d&&Object(n.jsx)("div",{className:"status",children:d}),Object(n.jsx)("div",{className:"checkout-heading",children:Object(n.jsx)("h3",{children:"Invoice"})}),Object(n.jsxs)("div",{className:"bill-to",children:[Object(n.jsx)("b",{children:"Billed To: "}),t]}),Object(n.jsxs)("div",{className:"table",children:[Object(n.jsxs)("ul",{className:"checkout-display-panel",children:[Object(n.jsxs)("li",{className:"checkout-list",children:[Object(n.jsx)("span",{className:"colheading checkout-check",children:"Item\xa0Name"}),Object(n.jsx)("span",{className:"colheading checkout-check",children:"Rate"}),Object(n.jsx)("span",{className:"colheading checkout-check",children:"Quantity"}),Object(n.jsx)("span",{className:"colheading checkout-check",children:"Total\xa0Price"})]}),Object.values(O).map((function(e){return Object(n.jsxs)("li",{className:"checkout-list",children:[Object(n.jsxs)("span",{className:"checkout-check",children:[e.itemName," "]}),Object(n.jsxs)("span",{className:"checkout-check",children:["$",e.price]}),Object(n.jsx)("span",{className:"checkout-check",children:e.orderedQuan}),Object(n.jsxs)("span",{className:"checkout-check",children:["$",e.totalPrice]})]},e.itemId)}))]}),Object(n.jsx)("hr",{className:"thick-line"}),Object(n.jsxs)("div",{className:"checkout-totals",children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("span",{className:"checkout-totals-subtitle",children:"Subtotal: "}),Object(n.jsxs)("span",{className:"checkout-subtotals",children:["$",r]})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("span",{className:"checkout-totals-subtitle",children:"Tax:"}),Object(n.jsx)("span",{className:"checkout-tax",children:"10%"})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("span",{className:"checkout-totals-subtitle",children:"Shipping:"}),Object(n.jsx)("span",{className:"checkout-shipping",children:" $5.99"})]}),Object(n.jsx)("hr",{className:"thick-line"}),Object(n.jsxs)("p",{children:[Object(n.jsx)("span",{className:"checkout-totals-subtitle",children:"Total:"}),Object(n.jsxs)("span",{className:"checkout-finalamt",children:["$",v]})]})]})]}),Object(n.jsx)("div",{className:"place-order-button",children:Object(n.jsx)("button",{className:"place-order",onClick:function(e){return D()},children:"Place Order"})}),w?Object(n.jsx)("div",{className:"place-order-text",children:"Congratulations!!!Your Order is successfully placed!"}):null]})};var S=function(){var e,t=Object(s.useState)({isLoggedIn:!1,isPending:!0}),c=Object(j.a)(t,2),a=c[0],r=c[1],i=Object(s.useState)(""),l=Object(j.a)(i,2),u=l[0],b=l[1],h=Object(s.useState)(!1),O=Object(j.a)(h,2),f=O[0],x=O[1],p=Object(s.useState)(!1),g=Object(j.a)(p,2),N=g[0],S=g[1],w=Object(s.useState)(!1),I=Object(j.a)(w,2),P=I[0],C=I[1];return Object(s.useEffect)((function(){fetch("/session",{method:"GET"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){r({isLoggedIn:!0,isPending:!1}),b(e.username),x(!1),S(!1),C(!1)})).catch((function(){r({isLoggedIn:!1,isPending:!1}),x(!1),S(!1),C(!1)}))}),[]),a.isPending?Object(n.jsx)("div",{className:"app",children:"Loading..."}):(e=a.isLoggedIn&&N?Object(n.jsx)(k,{username:u}):a.isLoggedIn&&P?Object(n.jsx)(y,{username:u}):a.isLoggedIn?Object(n.jsx)(v,{username:u,isHome:f,setIsHome:x}):Object(n.jsx)(m,{onLogin:function(e){var t=e.username;r({isLoggedIn:!0,isPending:!1}),b(t),x(!1),S(!1),C(!1)}}),Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)("h2",{className:"title",children:"Glow Away"}),Object(n.jsx)(d,{user:a,onLogout:function(){r(Object(o.a)(Object(o.a)({},a),{},{isPending:!0})),fetch("/session",{method:"DELETE"}).catch((function(){return Promise.reject({error:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){r({isLoggedIn:!1,isPending:!1}),x(!1),S(!1),C(!1)})).catch((function(){r(Object(o.a)(Object(o.a)({},a),{},{isPending:!1})),x(!1),S(!1),C(!1)}))},toHomePage:function(){x(!0),S(!1),C(!1)},toViewCartPage:function(){S(!0),x(!1),C(!1)},toCheckoutPage:function(){C(!0),S(!1),x(!1)},username:u}),e]}))},w=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,17)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root")),w()}},[[16,1,2]]]);
//# sourceMappingURL=main.93f787ca.chunk.js.map